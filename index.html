<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <title>MinPris – tilbudskalkulator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      padding: 30px;
    }

    h1 {
      margin-bottom: 20px;
    }

    input, textarea, button {
      width: 100%;
      padding: 10px;
      margin: 6px 0;
      font-size: 16px;
    }

    button {
      background: black;
      color: white;
      border: none;
      cursor: pointer;
    }

    button:hover {
      opacity: 0.8;
    }

    .box {
      background: white;
      padding: 20px;
      border-radius: 6px;
      max-width: 600px;
    }

    #resultat {
      margin-top: 20px;
      padding: 10px;
      background: #eee;
    }
  </style>
</head>
<body>

  <div class="box">
    <h1>MinPris – tilbudskalkulator</h1>

    <textarea id="beskrivelse" placeholder="Beskrivelse av jobben"></textarea>

    <input id="timer" type="number" placeholder="Timer">
    <input id="dager" type="number" placeholder="Dager">
    <input id="arbeid" type="number" placeholder="Arbeid (kr)">
    <input id="kjoring" type="number" placeholder="Kjøring (kr)">
    <input id="forbruk" type="number" placeholder="Forbruk (kr)">
    <input id="avfall" type="number" placeholder="Avfall (kr)">

    <button onclick="beregn()">Beregn</button>
    <button onclick="lagTilbud()">Generer tilbudstekst</button>
    <button onclick="lastNedPDF()">Last ned PDF</button>

    <div id="resultat"></div>
  </div>

  <script>
    function beregn() {
      const arbeid = Number(document.getElementById("arbeid").value || 0);
      const kjoring = Number(document.getElementById("kjoring").value || 0);
      const forbruk = Number(document.getElementById("forbruk").value || 0);
      const avfall = Number(document.getElementById("avfall").value || 0);

      const total = arbeid + kjoring + forbruk + avfall;

      document.getElementById("resultat").innerHTML =
        "<strong>Totalpris:</strong> " + total + " kr";
    }

    function lagTilbud() {
      const tekst = `
Tilbud:

Beskrivelse:
${document.getElementById("beskrivelse").value}

Timer: ${document.getElementById("timer").value}
Dager: ${document.getElementById("dager").value}

Arbeid: ${document.getElementById("arbeid").value} kr
Kjøring: ${document.getElementById("kjoring").value} kr
Forbruk: ${document.getElementById("forbruk").value} kr
Avfall: ${document.getElementById("avfall").value} kr
`;

      document.getElementById("resultat").innerText = tekst;
    }

    function lastNedPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const tekst = document.getElementById("resultat").innerText;

      if (!tekst) {
        alert("Generer tilbud først!");
        return;
      }

      doc.text(tekst, 10, 10);
      doc.save("tilbud.pdf");
    }
  </script>

</body>
</html>
